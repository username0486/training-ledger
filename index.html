
  <!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <meta name="theme-color" content="#ff6b6b" />
      <meta name="description" content="A focused workout log that handles weights, reps, and sessions so you can concentrate on training." />
      <link rel="manifest" href="/manifest.json" />
      <title>Training Ledger</title>
      <script>
        // Apply theme before first paint to avoid flicker
        (function() {
          try {
            // Check for saved theme preference
            const prefs = localStorage.getItem('training-ledger-preferences');
            let theme = 'dark'; // Default to dark
            
            if (prefs) {
              try {
                const parsed = JSON.parse(prefs);
                if (parsed.appearance === 'light' || parsed.appearance === 'dark') {
                  theme = parsed.appearance;
                }
              } catch (e) {
                // JSON parse failed, will fallback to old key below
              }
            }
            
            // Fallback to old localStorage key for backward compatibility
            // (if theme is still default or parsing failed)
            if (theme === 'dark') {
              const oldTheme = localStorage.getItem('workout-app-theme');
              if (oldTheme === 'light' || oldTheme === 'dark') {
                theme = oldTheme;
              }
            }
            
            // Apply theme class immediately
            if (theme === 'light') {
              document.documentElement.classList.add('light');
            } else {
              document.documentElement.classList.remove('light');
            }
          } catch (e) {
            // If anything fails, default to dark (no class = dark)
            document.documentElement.classList.remove('light');
          }
        })();
      </script>
    </head>

    <body>
      <div id="root"></div>
      <script type="module" src="/src/main.tsx"></script>
    </body>
  </html>
  